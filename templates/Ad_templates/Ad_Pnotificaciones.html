<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ichiraku Ramen - Administrador de informes</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/Ad_css/Ad_Dinformes.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/Global_css/menu.css') }}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>

  <!-- Barra lateral -->
  <div class="sidebar">
      <div class="logo">
        <img src="{{ url_for('static', filename='image/logo.png') }}" alt="Logo Ichiraku">
      </div>

      <nav class="menu">
          <button onclick="window.location.href='{{ url_for('Ad_Inicio') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/casita.png') }}" alt="Inicio"> Inicio
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Rempleados') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/folder.png') }}" alt="Personal"> Personal
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Rproductos') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/base.png') }}" alt="Productos"> Productos
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Dinformes') }}'" class="menu-button active">
            <img src="{{ url_for('static', filename='image/grafica.png') }}" alt="Reportes"> Reportes
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Rlocales') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/personas.png') }}" alt="Locales"> Locales
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Pnotificaciones') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/campana.png') }}" alt="Avisos"> Avisos
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Ceditar') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/corazon.png') }}" alt="Usuario"> Usuario
          </button>
        </nav>
  <button class="logout-btn" onclick="window.location.href='/logout'">Cerrar sesion</button>
  </div>

  <!-- Contenido principal -->
  <main class="main-content">
      <div class="welcome-box">
          <h1 class="welcome-title">Panel de administrador</h1>
      </div>

      <!-- Secci칩n de 칔ltimo Informe -->
      <div class="last-report-section">
          <h2>游늵 칔ltimo Informe Generado</h2>
          
          {% if ultimo_informe %}
          <div class="last-report-card">
              <div class="report-info">
                  <div class="info-row">
                      <span class="label">ID Informe:</span>
                      <span class="value">{{ ultimo_informe.id_informe }}</span>
                  </div>
                  <div class="info-row">
                      <span class="label">ID Pedido:</span>
                      <span class="value">{{ ultimo_informe.id_inf_pedido }}</span>
                  </div>
                  <div class="info-row">
                      <span class="label">Fecha de Creaci칩n:</span>
                      <span class="value">
                          {{ ultimo_informe.fecha_creacion[:10] if ultimo_informe.fecha_creacion else 'N/A' }}
                      </span>
                  </div>
              </div>
              <div class="report-actions">
                  <button class="btn-download" onclick="descargarInforme({{ ultimo_informe.id_informe }})">
                      游닌 Descargar PDF
                  </button>
              </div>
          </div>
          {% else %}
          <div class="no-report-card">
              <p>游닔 No hay informes generados a칰n</p>
              <button class="btn-generate" onclick="generarInformeDiario()">
                  游 Generar Informe Diario
              </button>
          </div>
          {% endif %}
      </div>

      <!-- Secci칩n de B칰squeda -->
      <div class="search-section">
          <h2>游댌 Buscar Informes</h2>
          
          <div class="search-options">
              <input type="text" id="idInforme" placeholder="Buscar por ID de informe">
              <input type="date" id="fechaInforme" class="date-picker">
              <button class="btn-search" onclick="buscarInforme()">Buscar</button>
          </div>

          <div id="resultadosBusqueda" class="search-results">
              <!-- Los resultados de b칰squeda aparecer치n aqu칤 -->
          </div>
      </div>

      <!-- Secci칩n de Descargas -->
      <div class="download-section">
          <h2>游닍 Descargar Informes por Rango</h2>
          
          <div class="download-options">
              <button class="btn-download-range" onclick="descargarPorRango('semana')">
                  游닌 Descargar Semanal
              </button>
              <button class="btn-download-range" onclick="descargarPorRango('mes')">
                  游닌 Descargar Mensual
              </button>
              <button class="btn-download-range" onclick="descargarPorRango('anio')">
                  游닌 Descargar Anual
              </button>
          </div>
      </div>

  </main>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
  <script src="{{ url_for('static', filename='js/Global_js/alertaNinja.js') }}"></script>
  <script src="{{ url_for('static', filename='js/Ad_js/Dinformes.js') }}"></script>

</body>
</html>