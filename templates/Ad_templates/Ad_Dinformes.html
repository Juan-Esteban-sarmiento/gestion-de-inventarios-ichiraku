<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ichiraku Ramen - Administrador de informes</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/Ad_css/Ad_Dinformes.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/Global_css/menu.css') }}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>

  <!-- Barra lateral -->
  <div class="sidebar">
      <div class="logo">
        <img src="{{ url_for('static', filename='image/logo.png') }}" alt="Logo Ichiraku">
      </div>

      <nav class="menu">
          <button onclick="window.location.href='{{ url_for('Ad_Inicio') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/casita.png') }}" alt="Inicio"> Inicio
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Rempleados') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/folder.png') }}" alt="Personal"> Personal
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Rproductos') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/base.png') }}" alt="Productos"> Productos
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Dinformes') }}'" class="menu-button active">
            <img src="{{ url_for('static', filename='image/grafica.png') }}" alt="Reportes"> Reportes
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Rlocales') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/personas.png') }}" alt="Locales"> Locales
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Pnotificaciones') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/campana.png') }}" alt="Avisos"> Avisos
          </button>
          <button onclick="window.location.href='{{ url_for('Ad_Ceditar') }}'" class="menu-button">
            <img src="{{ url_for('static', filename='image/corazon.png') }}" alt="Usuario"> Usuario
          </button>
        </nav>
  <button class="logout-btn" onclick="window.location.href='/logout'">Cerrar sesion</button>
  </div>

  <!-- Contenido principal - MANTENIENDO TU DISE칌O ORIGINAL -->
  <main class="main-container">
    <div class="panel-card">
      
      <h1>游꼪 PANEL DE ADMINISTRADOR</h1>

      <!-- SECCI칍N 1: 칔LTIMO INFORME GENERADO -->
      <div class="search-box" style="margin-bottom: 30px;">
        <h2 style="color: #e63900; width: 100%; text-align: center; margin-bottom: 20px;">游늵 칔LTIMO INFORME GENERADO</h2>
        
        {% if ultimo_informe %}
        <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; background: rgba(230, 57, 0, 0.1); padding: 20px; border-radius: 10px; border-left: 4px solid #e63900;">
          <div class="report-info">
            <div style="display: flex; margin-bottom: 10px;">
              <span style="font-weight: bold; width: 150px; color: #e63900;">ID Informe:</span>
              <span style="color: #fff;">{{ ultimo_informe.id_informe }}</span>
            </div>
            <div style="display: flex; margin-bottom: 10px;">
              <span style="font-weight: bold; width: 150px; color: #e63900;">ID Pedido:</span>
              <span style="color: #fff;">{{ ultimo_informe.id_inf_pedido }}</span>
            </div>
            <div style="display: flex;">
              <span style="font-weight: bold; width: 150px; color: #e63900;">Fecha:</span>
              <span style="color: #fff;">
                {{ ultimo_informe.fecha_creacion[:10] if ultimo_informe.fecha_creacion else 'N/A' }}
              </span>
            </div>
          </div>
          <button class="download-button" onclick="descargarInforme({{ ultimo_informe.id_informe }})" style="background: #e63900; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
            游닌 Descargar PDF
          </button>
        </div>
        {% else %}
        <div style="text-align: center; padding: 40px; background: rgba(255, 255, 255, 0.05); border-radius: 10px; border: 2px dashed #e63900; width: 100%;">
          <p style="color: #fff; font-size: 1.2rem; margin-bottom: 20px;">游닔 No hay informes generados a칰n</p>
          <button class="download-button" onclick="generarInformeDiario()" style="background: #e63900; color: white; border: none; padding: 12px 24px; border-radius: 5px; cursor: pointer; font-size: 1.1rem;">
            游 Generar Informe Diario
          </button>
        </div>
        {% endif %}
      </div>

      <!-- SECCI칍N 2: BUSCAR INFORMES (tu dise침o original) -->
      <div class="search-box">
        <h2 style="color: #e63900; width: 100%; text-align: center; margin-bottom: 20px;">游댌 BUSCAR INFORMES</h2>
        
        <input type="text" id="id_informe" placeholder="Buscar por ID de informe">
        <input type="text" id="datePicker" placeholder="Seleccionar fecha" class="date-picker">
        <button onclick="buscarInforme()">BUSCAR</button>
      </div>

      <!-- 游 Contenedor de resultados -->
      <div id="resultEmpleado" class="result-box">
        <!-- Los resultados aparecer치n aqu칤 -->
      </div>

      <!-- SECCI칍N 3: DESCARGAR INFORMES POR RANGO -->
      <div class="download-container">
        <h2 style="color: #e63900; width: 100%; text-align: center; margin-bottom: 20px;">游닍 DESCARGAR INFORMES</h2>
        
        <button class="download-button" onclick="descargarPorRango('semana')">
          游닌 DESCARGAR SEMANAL
        </button>
        <button class="download-button" onclick="descargarPorRango('mes')">
          游닌 DESCARGAR MENSUAL
        </button>
        <button class="download-button" onclick="descargarPorRango('anio')">
          游닌 DESCARGAR ANUAL
        </button>
      </div>

    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
  <script src="{{ url_for('static', filename='js/Global_js/alertaNinja.js') }}"></script>
  <script src="{{ url_for('static', filename='js/Ad_js/Dinformes.js') }}"></script>

</body>
</html>
