<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Ichiraku Ramen - Recetarios</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Ad_css/Ad_Recetarios.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Global_css/menu.css') }}">
    <script src="{{ url_for('static', filename='js/Global_js/session_timeout.js') }}"></script>
</head>

<body>

    <div class="sidebar">
        <div class="user-profile">
            <img src="{{ session.get('foto') or url_for('static', filename='image/default.png') }}" alt="Foto"
                class="user-avatar"
                onerror="this.onerror=null; this.src='{{ url_for('static', filename='image/default.png') }}';">
            <span class="user-name">{{ session.get('nombre', 'Usuario') }}</span>
            <span class="user-role">{{ session.get('role', '') }}</span>
        </div>

        <nav class="menu">
            <button onclick="window.location.href='{{ url_for('Ad_Inicio') }}'" class="menu-button">
                <img src="{{ url_for('static', filename='image/casita.png') }}" alt="Inicio"> Inicio
            </button>
            <button onclick="window.location.href='{{ url_for('Ad_Rempleados') }}'" class="menu-button">
                <img src="{{ url_for('static', filename='image/folder.png') }}" alt="Personal"> Personal
            </button>
            <button onclick="window.location.href='{{ url_for('Ad_Rproductos') }}'" class="menu-button">
                <img src="{{ url_for('static', filename='image/base.png') }}" alt="Productos"> Productos
            </button>
            <button onclick="window.location.href='{{ url_for('Ad_Recetarios') }}'" class="menu-button active">
                <img src="{{ url_for('static', filename='image/ramen.png') }}" alt="Recetas"> Recetarios
            </button>
            <button onclick="window.location.href='{{ url_for('Ad_Inventario') }}'" class="menu-button">
                <img src="{{ url_for('static', filename='image/caja.png') }}" alt="Inventario"> Inventario
            </button>
            <button onclick="window.location.href='{{ url_for('Ad_Dinformes') }}'" class="menu-button">
                <img src="{{ url_for('static', filename='image/grafica.png') }}" alt="Reportes"> Reportes
            </button>
            <button onclick="window.location.href='{{ url_for('Ad_Rlocales') }}'" class="menu-button">
                <img src="{{ url_for('static', filename='image/personas.png') }}" alt="Locales"> Locales
            </button>
            <button onclick="window.location.href='{{ url_for('Ad_Pnotificaciones') }}'" class="menu-button">
                <img src="{{ url_for('static', filename='image/campana.png') }}" alt="Notificaciones"> Avisos
            </button>
            <button onclick="window.location.href='{{ url_for('Ad_Ceditar') }}'" class="menu-button">
                <img src="{{ url_for('static', filename='image/corazon.png') }}" alt="Editar"> Usuario
            </button>
        </nav>
        <button class="logout-btn" onclick="window.location.href='/logout'">Cerrar sesion</button>
    </div>

    <!-- Contenido principal -->
    <main class="main-content">
        <div class="box-welcome">
            <h1 class="welcome-title">Panel de administracion</h1>
        </div>

        <div class="recipes-container">

            <!-- Formulario de creaci칩n (Caja Izquierda) -->
            <section class="register-box">
                <h2>Registrar Receta</h2>
                <form id="registerRecipeForm" novalidate>
                    <label for="nombreReceta">Nombre del Plato</label>
                    <input type="text" id="nombreReceta" placeholder="Ej: Ramen Tonkotsu" required>

                    <label for="descripcionReceta">Descripci칩n</label>
                    <textarea id="descripcionReceta" placeholder="Breve descripci칩n del plato..."></textarea>

                    <div class="ingredients-header">
                        <h3>Ingredientes</h3>
                        <button type="button" class="btn-add-ingredient" id="btnAddIngredient">
                            + Agregar
                        </button>
                    </div>

                    <div id="ingredientsList" class="ingredients-list">
                        <!-- Filas de ingredientes din치micas -->
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn">
                            <img class="icon" src="{{ url_for('static', filename='image/mas.png') }}" alt="mas" />
                            Guardar
                        </button>

                        <input type="file" id="fotoReceta" accept="image/*" style="display:none;">

                        <button type="button" class="btn secondary"
                            onclick="document.getElementById('fotoReceta').click()">
                            <img class="icon" src="{{ url_for('static', filename='image/subir.png') }}" alt="subir" />
                            Foto
                        </button>
                    </div>
                    <img id="previewFotoReceta" src="" alt="Vista previa"
                        style="display:none; margin: 15px auto 0; border: 2px dashed var(--red-brand); border-radius: 12px; width: 80px; height: 80px; object-fit: cover;">
                </form>
            </section>

            <!-- Lista de recetas (Caja Derecha) -->
            <section class="list-box">
                <h2>Lista de Recetas</h2>
                <div id="recipesList" class="result-box">
                    {% if recetas %}
                    {% for receta in recetas %}
                    <div class="recipe-card">
                        <img src="{{ receta.foto or url_for('static', filename='image/default_food.png') }}"
                            alt="{{ receta.nombre }}" class="recipe-img">
                        <div class="recipe-info">
                            <h3>{{ receta.nombre }}</h3>
                            <p>{{ receta.descripcion }}</p>
                            <span class="badge {{ 'enabled' if receta.habilitado else 'disabled' }}">
                                {{ 'Activa' if receta.habilitado else 'Inactiva' }}
                            </span>
                        </div>
                    </div>
                    {% endfor %}
                    {% else %}
                    <p>No hay recetas registradas.</p>
                    {% endif %}
                </div>
            </section>

        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="{{ url_for('static', filename='js/Global_js/alertaNinja.js') }}"></script>
    <script src="{{ url_for('static', filename='js/Ad_js/Ad_Recetarios.js') }}"></script>
</body>

</html>